# 🧪 テスト仕様書

## テスト戦略

Cat Todo アプリケーションの品質保証のための包括的なテスト計画

## テスト分類

### 1. 機能テスト (Functional Testing)
- ユーザーストーリーベースの機能検証
- ブラウザでの手動テスト
- E2E自動テスト（将来実装）

### 2. APIテスト (API Testing)
- REST API エンドポイントの検証
- Swagger UI での手動テスト
- 自動化テスト（JUnit）

### 3. UI/UX テスト (UI/UX Testing)
- レスポンシブデザイン検証
- ブラウザ互換性テスト
- アクセシビリティテスト

## 機能テスト仕様

### TODO基本機能

#### TC001: TODO作成
**前提条件:**
- アプリケーションが起動している
- TODOリストが表示されている

**テスト手順:**
1. タイトル入力フィールドに「猫のご飯を買う」を入力
2. 詳細入力フィールドに「プレミアムドライフード」を入力
3. 期限を来週の日付に設定
4. 「Add Todo」ボタンをクリック

**期待結果:**
- 新しいTODOがリストの最下部に追加される
- フォームがクリアされる
- 期限が青色で表示される

#### TC002: TODO完了切り替え
**テスト手順:**
1. 未完了のTODOのチェックボックスをクリック
2. 完了したTODOのチェックボックスをクリック

**期待結果:**
- チェック時：タイトルと説明に取り消し線
- チェック解除時：取り消し線が除去される

#### TC003: TODO編集
**テスト手順:**
1. TODOの編集ボタン（✏️）をクリック
2. タイトルを「更新されたタイトル」に変更
3. 「Save」ボタンをクリック

**期待結果:**
- 編集モードが終了
- 変更内容が反映される

#### TC004: TODO削除
**テスト手順:**
1. TODOの削除ボタン（🗑️）をクリック

**期待結果:**
- TODOがリストから除去される

### 期限機能

#### TC005: 期限設定
**テスト手順:**
1. 新しいTODO作成時に期限日付を設定
2. 「1 Week Later」ボタンをクリック

**期待結果:**
- 指定した期限がTODOに表示される
- 1週間後の日付が自動設定される

#### TC006: 期限切れ表示
**前提条件:**
- 過去の日付を期限とするTODOが存在

**期待結果:**
- 期限が赤色で表示される
- 「(Overdue)」ラベルが表示される

### ドラッグ&ドロップ機能

#### TC007: TODO順序変更
**テスト手順:**
1. TODOの⋮⋮ハンドルをドラッグ
2. 別の位置にドロップ

**期待結果:**
- TODOの表示順序が変更される
- ドラッグ中に視覚的フィードバック
- ページリロード後も順序が保持される

## APIテスト仕様

### エンドポイントテスト

#### AT001: GET /api/todos
```bash
curl -X GET http://localhost:8081/api/todos
```
**期待結果:**
- ステータスコード: 200
- レスポンス: TODOリスト（displayOrder昇順）

#### AT002: POST /api/todos
```bash
curl -X POST http://localhost:8081/api/todos \
  -H "Content-Type: application/json" \
  -d '{"title":"テストTODO","description":"APIテスト"}'
```
**期待結果:**
- ステータスコード: 200
- レスポンス: 作成されたTODOオブジェクト
- displayOrderが自動設定される

#### AT003: PUT /api/todos/{id}
```bash
curl -X PUT http://localhost:8081/api/todos/1 \
  -H "Content-Type: application/json" \
  -d '{"title":"更新されたタイトル","completed":true}'
```
**期待結果:**
- ステータスコード: 200
- レスポンス: 更新されたTODOオブジェクト

#### AT004: DELETE /api/todos/{id}
```bash
curl -X DELETE http://localhost:8081/api/todos/1
```
**期待結果:**
- ステータスコード: 200
- TODOが削除される

#### AT005: PUT /api/todos/reorder
```bash
curl -X PUT http://localhost:8081/api/todos/reorder \
  -H "Content-Type: application/json" \
  -d '[2,1,3]'
```
**期待結果:**
- ステータスコード: 200
- displayOrderが更新される

### エラーハンドリングテスト

#### AT006: 存在しないTODO取得
```bash
curl -X GET http://localhost:8081/api/todos/999
```
**期待結果:**
- ステータスコード: 404

#### AT007: 不正なリクエストボディ
```bash
curl -X POST http://localhost:8081/api/todos \
  -H "Content-Type: application/json" \
  -d '{"title":""}'
```
**期待結果:**
- ステータスコード: 400

## UI/UXテスト仕様

### レスポンシブテスト

#### RT001: モバイル表示（375px）
**確認項目:**
- [ ] フォームが縦積みで表示される
- [ ] ボタンサイズが適切
- [ ] 文字が読みやすい
- [ ] スクロールが正常

#### RT002: タブレット表示（768px）
**確認項目:**
- [ ] フォームが横並びで表示される
- [ ] 余白が適切
- [ ] タッチ操作が可能

#### RT003: デスクトップ表示（1024px以上）
**確認項目:**
- [ ] コンテンツが中央寄せ
- [ ] マウス操作が快適
- [ ] ホバー効果が動作

### ブラウザ互換性テスト

#### BT001: Chrome（最新版）
- [ ] 全機能が正常動作
- [ ] ドラッグ&ドロップが滑らか
- [ ] 日付ピッカーが表示される

#### BT002: Firefox（最新版）
- [ ] 全機能が正常動作
- [ ] スタイルが崩れない
- [ ] 日付入力が機能する

#### BT003: Safari（最新版）
- [ ] 全機能が正常動作
- [ ] iOS Safari でも確認
- [ ] 日付フォーマットが適切

### アクセシビリティテスト

#### AC001: キーボード操作
- [ ] Tabキーでフォーカス移動
- [ ] Enterキーでフォーム送信
- [ ] Escapeキーで編集キャンセル

#### AC002: スクリーンリーダー対応
- [ ] alt属性が設定されている
- [ ] 適切なヘッダー構造
- [ ] フォームラベルが関連付けされている

## パフォーマンステスト

### PT001: レスポンス時間
**測定項目:**
- API レスポンス時間 < 2秒
- 画面表示時間 < 3秒
- ドラッグ&ドロップ応答時間 < 150ms

### PT002: 大量データ
**テストデータ:**
- 100件のTODOを作成
- ドラッグ&ドロップ操作
- 一覧表示パフォーマンス

## セキュリティテスト

### ST001: 入力値検証
**テスト項目:**
- [ ] XSS対策（スクリプトタグ入力）
- [ ] SQLインジェクション対策
- [ ] 長大文字列の入力

### ST002: CORS設定
**確認項目:**
- [ ] 許可されたオリジンからのアクセス
- [ ] 不正なオリジンからのアクセス拒否

## 自動テスト実装案

### バックエンド（JUnit）
```java
@SpringBootTest
class TodoControllerTest {
    
    @Test
    void getTodos_shouldReturnSortedList() {
        // テストコード
    }
    
    @Test
    void createTodo_shouldReturnCreatedTodo() {
        // テストコード
    }
}
```

### フロントエンド（Vitest）
```javascript
describe('Todo App', () => {
  test('should create new todo', async () => {
    // テストコード
  })
  
  test('should toggle todo completion', async () => {
    // テストコード
  })
})
```

## テスト環境

### 推奨テストデータ
```sql
INSERT INTO todos VALUES
(1, 'テスト用TODO1', 'テスト説明1', false, '2025-08-25 23:59:59', 0, CURRENT_TIMESTAMP),
(2, 'テスト用TODO2', 'テスト説明2', true, '2025-08-20 23:59:59', 1, CURRENT_TIMESTAMP),
(3, '期限切れTODO', 'テスト説明3', false, '2025-08-10 23:59:59', 2, CURRENT_TIMESTAMP);
```

## テスト実行スケジュール

### 開発時
- [ ] 機能実装後：該当機能テスト
- [ ] API変更後：APIテスト
- [ ] UI変更後：ブラウザテスト

### リリース前
- [ ] 全機能テスト実行
- [ ] 複数ブラウザテスト
- [ ] パフォーマンステスト
- [ ] セキュリティテスト

## バグ管理

### 優先度分類
- **Critical**: アプリ停止・データ損失
- **High**: 主要機能に影響
- **Medium**: 一部機能に影響
- **Low**: UI/UXの軽微な問題

### 報告フォーマット
```
【バグタイトル】
【再現手順】
1. 
2. 
3. 

【期待結果】
【実際の結果】
【環境情報】ブラウザ・OS
【スクリーンショット】
```